MONGODB_URI: mongodb://admin:password@localhost:27017/am-trade?authSource=admin
MONGODB_DATABASE: am-trade

KAFKA_BOOTSTRAP_SERVERS: localhost:9092
KAFKA_SECURITY_PROTOCOL: PLAINTEXT
KAFKA_SASL_MECHANISM: PLAIN
KAFKA_SASL_JAAS_CONFIG:

# Application specific common settings
am:
  trade:
    kafka:
      enabled: true
    api:
      enabled: true
    common:
      enabled: true
      date-format: yyyy-MM-dd'T'HH:mm:ss.SSS
    services:
      enabled: true
      retry:
        max-attempts: 3
        backoff-multiplier: 2.0
      circuit-breaker:
        failure-threshold: 40
        reset-timeout-seconds: 60
    dashboard:
      enabled: true
      metrics:
        collection-interval-seconds: 60
        retention-days: 30

spring:
  server:
    port: 8080
  application:
    name: am-trade-management
  config:
    import:
      - classpath:application-common.yml
  data:
    mongodb:
      uri: ${MONGODB_URI}
      database: ${MONGODB_DATABASE}
      # ssl:
      #   enabled: true 
      #   invalid-hostname-allowed: false
    jackson:
      default-property-inclusion: non_null
      serialization:
        write-dates-as-timestamps: false
      deserialization:
        fail-on-unknown-properties: false
      date-format: yyyy-MM-dd'T'HH:mm:ss.SSSZ
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS}
    properties:
      security.protocol: ${KAFKA_SECURITY_PROTOCOL}
      sasl.mechanism: ${KAFKA_SASL_MECHANISM}
      sasl.jaas.config: ${KAFKA_SASL_JAAS_CONFIG} 
    consumer:
      group-id: am-trade-management
      auto-offset-reset: latest
    trade-topic: ${KAFKA_TOPICS_TRADE_EVENTS:am-trade}

# Management/Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      probes:
        enabled: true
      show-details: always
      validate-group-membership: false
      group:
        readiness:
          include: mongodb,kafka,diskSpace
  health:
    livenessstate:
      enabled: true
    readinessstate:
      enabled: true
    mongo:
      enabled: false

# Logging configuration
logging:
  level:
    root: INFO
    am.trade: INFO
    org.springframework.data.mongodb: INFO
    org.springframework.web: INFO
